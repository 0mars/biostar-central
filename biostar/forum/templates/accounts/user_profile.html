{% extends "forum_base.html" %}
{% load accounts_tags %}
{% load forum_tags %}
{% block headtitle %}{{ target.profile.name }}{% endblock %}

{% block content %}

{% if request.user.is_superuser and debugging %}
    <a href="{% url 'debug_user' %}?uid={{ target.profile.uid }}">
        <i class="address card icon"></i> Log in as user
    </a>
{% endif %}

<div class="ui three column grid">

    <div class="column">
        <div class="ui centered card">
            <div class="image">
                <img class="ui centered image" src="{% gravatar user=target size=300 %}" >
            </div>
            <div class="ui bottom attached buttons">

                {% if can_moderate %}
                    <div class="ui button moderate-user" data-value="{{ target.profile.uid }}">
                      <i class="hand paper icon"></i>
                      Moderate
                    </div>
                {% endif %}

                {% if target == request.user %}
                    <a class="ui button" href="{% url 'edit_profile' %}">
                        <i class="write icon"></i>Edit
                    </a>
                {% endif %}
            </div>
        </div>
            <div id="moderate-insert-{{ target.profile.uid }}"></div>
    </div>

    <div class="column">
         <a  class="ui header" >
             {{target.profile.name}}
             {% user_stats user=target %}
        </a>

        <div>
            <b>Status</b> : {{ target.profile.get_state_display }}
        </div>

        <div>
            <b>Location</b> : {{ target.profile.location }}
        </div>
        <div>
            <b>Email</b> : {{ target|show_email:request.user }}
        </div>

        {% if target.profile.last_login %}
            <div>
                <b>Last seen </b> : {{ target.profile.last_login |time_ago }}
            </div>
        {% endif %}

        <div>
            <b>Joined</b> : {{ target.profile.date_joined|time_ago }}
        </div>

        <div>
            <b>Handle</b>: @{{ target.username }}

        </div>
    </div>

    <div class="column">
        {{ target.profile.html |safe }}
    </div>

</div>

    <div class="ui centered header"> Posts by {{ target.profile.name }}</div>
    {# List the users posts #}
    {% list_posts user=target %}


{% endblock %}