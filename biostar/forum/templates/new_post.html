{% extends "forum_base.html" %}
{% load forum_tags %}


{% block headtitle %}
    New Post
{% endblock %}


{% block content %}

    {% form_errors form %}
                    <div class="ui form">


<div class="ui horizontal segments no-shadow">
<div class="ui segment  no-shadow"></div>

<div class="ui basic compact segment no-shadow">

        <div class="ui medium header">{{ form_title }} <a class="ui link label" href="{% url 'post_list' %}">
            <i class="undo icon"></i> Back</a>
        </div>
    <div class="ui divider"></div>

        <form method="post" class="ui create-form form" action="{{ action_url }}">

            {{ form.media }}
            {% csrf_token %}

            <div class="required field">
                <label>{{ form.title.label }}</label>
                {{ form.title }}
                <p class="muted">{{ form.title.help_text }}</p>
            </div>


            <div class="required inline field">
                <label>{{ form.post_type.label }}</label>
                <select class="ui dropdown" name="{{ form.post_type.name }}" id="{{ form.post_type.id_for_label }}">
                    {% for val,name in  form.post_type.field.widget.choices %}
                        <option value="{{ val }}">{{ name }}</option>
                    {% endfor %}
                </select>

            </div>
             <p class="muted">{{ form.post_type.help_text }}</p>

            <div class="field">
                <label>{{ form.tag_val.label }}</label>


                <select multiple="multiple" class="ui search selection dropdown tag-field" id="tag-menu" field_id="{{form.tag_val.id_for_label}}">
                  <option value="">Tags</option>
                  {% for value, selected in tags_opt %}
                      {% if selected %}<option value="{{ value }}" selected="selected">{{value}}</option>
                      {% else %}<option value="{{ value }}">{{value}}</option>
                      {% endif %}
                  {% endfor %}

                </select>
                <input type="hidden" name="{{ form.tag_val.name }}" id="{{ form.tag_val.id_for_label }}">


                <p class="muted">{{ form.tag_val.help_text }}</p>
            </div>

            <div class="required input field">
                <label>{{ form.content.label }}</label>
                {{ form.content }}
            </div>


            <button type="submit" class="ui submit green button">
                <i class="check icon"></i>Submit
            </button>

            <a class="ui right floated button" href="{% url 'post_list' %}">
                <i class="undo icon"></i>Cancel
            </a>
        </form>


</div>

<div class="ui segment no-shadow"></div></div>
{% endblock %}
