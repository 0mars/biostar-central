{% extends "forum_list.html" %}
{% load forum_tags %}

{% block headtitle %}
    {{ post.title }}
{% endblock %}


{% block body %}

    {# The toplevel post #}
    <div class="ui vertical segment">
        {% post_body post=post user=request.user tree=tree form=form %}
    </div>

    {# Render each answer for the post #}
    {% for answer in answers %}
        <div class="ui vertical segment">
            {% post_body post=answer user=request.user tree=tree form=form %}
        </div>
    {% endfor %}

    <div class="ui vertical segment inputcolor">
        <div class="ui basic segment inputcolor">
            <div class="ui header">Add Your Answer</div>

            {% if request.user.is_authenticated %}

                <form method="post" class="ui form" action="{% url 'post_answer' post.uid %}">

                    {{ form.media }}

                    {% csrf_token %}

                    <div class="ui info tablet message">
                        <p><b>Note:</b> Answers should be used only as a response to the original post seen the top of
                            the
                            page!<br>
                            Use the <span class="ui tiny label">ADD COMMENT</span> or <span
                            class="ui tiny label">ADD REPLY</span> buttons
                            embedded in each post to comment, to ask for clarifications, to request more details etc.
                        </p>
                    </div>
                    <input type="hidden" name="{{ form.parent_uid.name }}" id="{{ form.parent_uid.id_for_label }}"
                           value={{ post.uid }}/>
                    <div class="field">
                        {{ form.content }}
                    </div>

                    <button type="submit" class="ui submit green button">
                        <i class="check icon"></i>Submit
                    </button>

                </form>

            {% else %}

                <div class="ui info message">
                    <p><a class="ui small label" href="{% url 'login' %}">
                        <i class="sign in icon"></i>Login</a> before adding your answer.</p>
                </div>

            {% endif %}
        </div>
    </div>

{% endblock %}

{% block sidebar %}
    {% single_post_feed post=post %}
{% endblock %}
