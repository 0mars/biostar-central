{% extends "base.html" %}
{% load forum_tags %}

{% block headtitle %}
    Forum
{% endblock %}


{% block body %}

    <div class="ui center aligned vertical segment">
        <a class="ui mini button" href="{% url 'post_create' %}">
            <i class="add circle icon"></i>New Post
        </a>
    </div>

    <div class="ui relaxed mini divided list">

        {% for post in posts %}

        <div class="item">

            <div class="ui two column grid container">
                <div class="row">

                    <div class="five wide column">

                        <div class="ui mini grey statistic">


                            {% if post.is_toplevel %}
                                <div class="value"><i class="{% outline_icon post=post type='vote' %} "></i>
                                    {{ post.thread_score }}</div>
                                <div class="label">Vote{{ post.thread_score|pluralize }}</div>
                            {% else %}
                                <div class="value"><i class="{% outline_icon post=post type='vote' %}"></i>
                                    {{ post.vote_count }}</div>
                                <div class="label">Vote{{ post.vote_count|pluralize }}</div>
                            {% endif %}
                        </div>

                        <div class="ui mini purple statistic">
                            <div class="value"> <i class="{% outline_icon post=post type='answer' %}"></i>
                                {{ post.root.reply_count }}</div>
                            <div class="label">Answer{{ post.root.reply_count|pluralize }}</div>
                        </div>
                        <div class="ui mini statistic">
                           <div class="value">{{ post.root.view_count|bignum }}</div>
                            <div class="label">Views</div>
                        </div>
                    </div>

                    <div class="eleven wide left aligned column">
                        <div class="item">
                             <div class="content">
                                 <div class="ui header">
                                    {% if post.type != post.QUESTION %}
                                        {{ post.get_type_display }}:
                                    {% endif %}
                                     <a href="{% url 'post_view' post.uid %}">{{ post.get_title }}</a>

                                 </div>
                                <div class="sixteen wide column" style="padding-top:10px">

                                {% for tag in post.tag_set.all %}
                                <a class="ui small label" href="#">{{ tag.name }}</a>
                                {% endfor %}

                                </div>
                             </div>

                        </div>
                    </div>


                    <div class="sixteen wide column">
                    <div class="ui right floated muted item" style="padding-top:10px">

                        written {{ post.creation_date|time_ago }} by {{post.author.profile.name }}

                        {% if post.author != post.lastedit_user %}
                        &bull; updated
                        <span class="ago2">{{ post.lastedit_date|time_ago }}</span> by
                        {{post.lastedit_user }}
                        {% endif %}

                    </div>
                    </div>
                </div>
            </div>


    </div>

        {% empty %}

        <div class="alert alert-info">There are no results for this page.</div>

        {% endfor %}
    </div>



{% endblock %}