{% extends "base_content.html" %}
{% load engine_tags %}
{% load staticfiles %}

{% block headtitle %}
    {{ recipe.name }}
{% endblock %}

{% block js %}
    <script src="{% static 'lib/codemirror.js' %}"></script>
    <script src="{% static 'lib/mode/simple.js' %}"></script>
    <script src="{% static 'lib/mode/engine.js' %}"></script>
{% endblock %}

{% block content %}

    <div class="ui  large vertical segment">

        <div class="ui divided link items">

            <div class="item">
                <div class="ui tiny image">
                    <img src="{% img recipe %}">
                </div>
                <div class="content">
                        <a class="subheader" href="{% url 'recipe_view' recipe.uid %}">
                        <i class="setting icon"></i> {{ recipe.name }}
                    </a>
                    <div class="description">{{ recipe.summary|markdown|safe }}</div>
                </div>
            </div>


        </div>

    </div>

    {% security_label recipe %}
<div id="copy-message-{{recipe.uid}}"></div>

    <div class="ui vertical  segment">

            {% form_errors form %}

            {% csrf_token %}


            <div class="six ui small buttons">
                <a class="ui green button" href="{% url 'recipe_run' recipe.uid %}">
                    <i class="spinner icon"></i> Run Recipe
                </a>

                <a class="ui button" href="{% url 'job_list' project.uid %}?filter={{ recipe.uid }}">
                    <i class="bar chart icon"></i>Recipe Results
                </a>


                <a class="ui button" href="{% url 'recipe_code' recipe.uid %}">
                    <i class="keyboard icon"></i>View Code
                </a>

                <a class="copy-data ui small button" data-uid="{{recipe.uid}}" copy-url="{% url 'recipe_copy' %}"
                   board="recipe_clipboard">
                    <i class="copy icon"></i>Copy Recipe
                </a>


                {% action_bar recipe 'recipe_edit' %}

            </div>



    </div>

    <div class="ui large vertical segment">
        {{ recipe.html|safe }}
    </div>



{% endblock %}


