{% extends "base.html" %}
{% load engine_tags %}
{% load staticfiles %}

{% block headtitle %}
    Managing people: {{ project.name }}
{% endblock %}

{% block body %}

    <div class="ui raised segments">
        {% project_name_bar project %}


        <div class="ui center aligned segment">
            <h3 class="ui icon header">
                <i class="users icon"></i>
                <p class="content">
                    Manage Access
                <p class="sub header">Manage user access to this project</p>
                </p>
            </h3>
        </div>




        <div class="ui basic segment">
            <div class="ui cards">

                {% for user, form in forms %}

                    <form method="post" action="{% url 'project_users' project.id %}">

                        <input type="hidden" name="user_id" value="{{ user.id }}">
                        <input type="hidden" name="project_id" value="{{ project.id }}">

                        {% csrf_token %}

                        <div class="ui card">

                            <div class="content">
                                <a class="header"> {{ user.first_name }}</a>
                                <div class="meta">
                                    <span class="date">{{ user.email }}</span>
                                </div>

                            </div>
                            <div class="content">
                                {{ form.access }}
                                <button type="submit" class="ui basic green center aligned button">
                                    Submit
                                </button>
                            </div>
                        </div>

                    </form>

                {% endfor %}

            </div>
        </div>

        <div class="ui segment inputcolor">

            <div class="ui tiny header">Search for users to manage</div>

            <form method="get" action="{% url 'project_users' project.id %}">
                <div class="ui fluid left icon input">

                    <input type="text" name="q" placeholder="">
                    <i class="search large icon"></i>
                    <button class="ui blue button" type="submit" formmethod="get">Search</button>

                </div>
            </form>

            {% if not_found %}
                <div class="ui red message">
                    <div class="header">Not Found: '{{ not_found }}'</div>
                </div>
            {% endif %}
        
        </div>

    </div>
{% endblock %}
