{% load static %}


<link rel="stylesheet" href="{% static 'codemirror/codemirror.css' %}">

        <script src="{% static 'codemirror/codemirror.js' %}"></script>
        <script src="{% static 'codemirror/mode/simple.js' %}"></script>
        <script src="{% static 'codemirror/mode/engine.js' %}"></script>


<div class="ui raised inputcolor segment">

            <form class="ui form" action="." method="POST">
            <div class="ui grid inputcolor">

                {% csrf_token %}

                <div class="sixteen wide center aligned column">
                    The web interface is generated from the JSON file. The JSON file with the script template
                    are used to produce the final script.
                </div>

                <div class="eight wide column">
                    <div class="ui basic segment">
                        <div class="ui center aligned header">
                            Interface JSON
                        </div>

                        <textarea class="code" rows="40" cols="55" name="json"
                                  id="json">{{ form.json_text.value }}</textarea>

                    </div>

                </div>

                <div class="eight wide column column">
                    <div class="ui basic segment">
                        <div class="ui center aligned header">
                            Script Template
                        </div>
                        <textarea class="code" rows="40" cols="55" name="template"
                                  id="template">{{ form.template.value }}</textarea>

                    </div>

                </div>

                <div class="sixteen wide column">
                    <div class="ui center aligned basic segment">

                        <div class="ui top pointing dropdown" >
                            <a class="ui blue button"> <i class="caret down icon"></i> Preview </a>
                            <div class="menu">
                                <a class="item" ><i class="edit icon" ></i>Preview interface</a>
                                <a class="item" ><i class="code icon" ></i>Preview code</a>
                                <a class="item" ><i class="settings icon" ></i>Preview both</a>
                            </div>
                        </div>

                        <button type="submit" name="action" value="SAVE" class="ui green button">
                            <i class="save icon"></i>Save Changes
                        </button>

                        <a class="ui  button" href="{% url 'recipe_view' recipe.uid %}">
                            <i class="setting icon"></i>View Recipe
                        </a>
                    </div>
                </div>

            </div>
        </form>
</div>

<script type="text/javascript">
    $(document).ready(function () {

        var json_edit = CodeMirror.fromTextArea(
            document.getElementById("json"), {
                lineNumbers: true,
                mode: "engine",


            }
        );
        var template_edit = CodeMirror.fromTextArea(
            document.getElementById("template"),
            {
                lineNumbers: true,
                mode: "engine"
            }
        );


    });

</script>