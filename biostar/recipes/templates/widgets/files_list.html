{% load engine_tags %}

{% if paths %}
    {% if reached_limit %}
        <div class="ui compact warning message"> There are too many files in this directory, returning the top <b>{{ limit }}</b>.</div>
    {% endif %}
    <div class="ui relaxed divided large list">
        {% for  rel_path, dir_names, last_name, tstamp, size, is_image in paths %}

            <div class="file item">
                <span href="">
                    {% for dname in dir_names %}
                        <span class="dirname">{{ dname }}</span> /
                    {% endfor %}
                    {{ last_name }}</span>

                {% if user.is_authenticated %}

                    <a data-root="{{ root }}" data-path="{{ rel_path }}"
                       class="ui small right floated label copy_file"> COPY
                        <span class="copy_msg" data-path="{{ rel_path }}"></span>
                    </a>

                {% endif %}

                <span class="ui right floated small label">{{ size|filesizeformat }}</span>

            </div>
        {% endfor %}
    </div>

{% else %}

    <div class="ui icon info message">
        <i class="exclamation triangle icon"></i>
        <div class="content">
            <div class="header">
                No files were found
            </div>
        </div>
    </div>
{% endif %}
