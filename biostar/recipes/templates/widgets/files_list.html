{% load engine_tags %}

{% if paths %}

    <div class="ui relaxed divided large list">
        {% for  rel_path, dir_names, last_name, tstamp, size, is_image, dir_name in paths %}

            <div class="file item" data-value="{{ dir_name }}/{{ last_name }}">
                {% if serve_view %}
                    {% url serve_view uid=uid path=rel_path as serve_url %}

                    <a href="{{ serve_url }}">
                        {% if is_image %}
                        <img class="ui small middle aligned image" src="{{ serve_url }}">{% endif %}
                        {{ rel_path }}
                    </a>
                {% else %}
                    <span>{{ dir_name }}/{{ last_name }}</span>
                {% endif %}

                {% if user.is_authenticated %}
                    <a class="ui small right floated label copy"> LINK</a>
                {% endif %}
                <span class="ui right floated small label">{{ size|filesizeformat }}</span>

            </div>
        {% endfor %}
    </div>

{% else %}

    <div class="ui icon info message">
        <i class="exclamation triangle icon"></i>
        <div class="content">
            <div class="header">
                No files were found
            </div>
        </div>
    </div>
{% endif %}