{% load engine_tags %}

<div class="ui raised segment inputcolor" style="border: none">

    <div class="ui vertical detail segment">
        {% if recipe.runnable %}
            <div class="ui right ribbon green label" id="recipe-run">
                <i class="check icon"></i>
                Authorized
            </div>
        {% else %}
            <div class="ui right ribbon orange label" id="recipe-run">
                <i class="hand paper icon"></i>
                Pending authorization
            </div>
        {% endif %}

        <div class="ui form">

            {% csrf_token %}
            {{ run_form.media }}

            {% recipe_form run_form %}

            <div class="field">
                {% if is_runnable %}
                    <button type="submit" class="ui green button">
                        <i class="check icon"></i>Run
                    </button>
                {% else %}
                    <button type="submit" class="ui disabled green button">
                        <i class="check icon"></i>Run
                    </button>
                {% endif %}

                <a class="ui button" href="{% url 'recipe_view' recipe.uid %}">
                    <i class="redo icon"></i>Cancel
                </a>
            </div>

            <div class="field">
                {% security_label recipe %}
            </div>
        </div>

    </div>

</div>