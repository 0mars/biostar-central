{% extends "base.html" %}

{% load basic %}
{% load voting %}

{% block subheader %}
  <h2>{{question.title }}</h2>
{% endblock %}

{% block custom-frameworks %}
    <!-- Voting AJAX -->
    <script src="/static/js/vote.js"></script>
    
    <!-- Tiny MCE editor -->
    <script type="text/javascript" src="http://helios.bx.psu.edu/static/tinymce/tiny_mce.js" ></script >
    <script type="text/javascript" >
        tinyMCE.init({
            theme : "advanced",
            mode : "textareas",
            plugins : "bbcode",
            theme_advanced_buttons1 : "bold,italic,underline,undo,redo,link,unlink,image,forecolor,styleselect,removeformat,cleanup,code",
            theme_advanced_buttons2 : "",
            theme_advanced_buttons3 : "",
            theme_advanced_toolbar_location : "bottom",
            theme_advanced_toolbar_align : "center",
            theme_advanced_styles : "Code=codeStyle;Quote=quoteStyle",
            content_css : "/static/biostar.css",
            entity_encoding : "raw",
            add_unload_trigger : false,
            remove_linebreaks : false,
            inline_styles : false,
            font_size_style_values : "medium,large,x-large,xx-large",
            convert_fonts_to_spans : false
        });
    </script>
{% endblock %}


</script >


{% block mainbody %}
    <div class="content"">
        
        
        <div id="question">
        
            <table>
                <tr>
                    <td valign="top"> 
                        {% votebox question.post %}
                    </td>
                    <td>
                        <div>
                            {{question.post.html|safe }}
                        </div>
    
                        <div class="tags">
                            {% for tag in question.tags.all %}
                               <a class="post-tag">{{ tag }}</a>
                            {% endfor %}
                        </div>
                       
                        <div class="left">
                            mod | 
                            <a href="/question/edit/{{question.id}}/">edit</a> | 
                            flag
                        </div>
    
                        <div class="right  question-user-info">
                            {% userbox question.post %}
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        &nbsp;
                    </td>
                    <td>
                        {% comments question.post.comments %}
                    </td>
                </tr>
                
            </table>
        
        </div>

        <div id="answers">
            
            <div id="answers-header">
                <h2> {{answers|length}} Answers</h2>
            </div>

            {% for answer in answers %}
            <div class="answer">
                <table>
                    <tr>
                        <td>
                            {% votebox answer.post %}
                        </td>
                        <td>
                            <div><a name="{{answer.id}}"></a> {{ answer.post.html|safe }}</div>
                            <div class="left">
                                
                                <a href="{{request.path}}#{{answer.id}}">link</a> | 
        
                                
                                mod | 
                                <a href="/answer/edit/{{question.id}}/{{answer.id}}/">edit</a> | flag
                                
                            </div>
        
                        <div class="right">
                            {% userbox answer.post 'answered' %}
                        </div>
        
                        </td>
                    </tr>
                    <tr class="comment-row">
                        <td></td>
                        <td>
                            {% comments answer.post.comments %}
                        </td>
                    </tr>
                </table>
            </div>
            {% endfor %}
        
           
            <div id="post-answer">
                <h2>Your Answer</h2>

                 {% if user.is_authenticated %}
                
                <form action="/answer/new/{{question.id}}/" method="post">
                    {% csrf_token %}
                    <textarea name="content" cols="50" rows="15" ></textarea>
                    <div align="center">
                        <input style="margin:10px;" type="submit" name="submit" value="Post Your Answer">
                    </div>
                </form>
                
                {% else %}
                    <div>
                        Please <a href="/openid/login/">log in</a> to post an answer.
                    </div>
                {% endif %}
                
            </div>



        </div>
    </div>
{% endblock %}
