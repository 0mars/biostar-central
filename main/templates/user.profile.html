{% extends "base.nosidebar.html" %}

{% load basic %}
{% load markup %}

{% block custom-frameworks %}
    <style type="text/css">
      .L  { float:left; padding-bottom:5px; }
      .W  { width: 7em; }
      .C  { clear: left }
    </style>
    <script src="/static/js/vote.js"></script>
    <script src="/static/js/mod.js"></script>
    
{% endblock %}

{% block subheader %}
  <h2>{{ selected.profile.display_name }} {% flair selected %}</h2>
{% endblock %}

{% block mainbar %}

<table border="0" width="950px">
<tr>
<td valign="top" align="center">
  <div style="margin: 1em">
    <div>{% gravatar selected 150 %}</div>
    <div>{% userrep selected %}</div>
    
    {% if user.profile.is_moderator %}
        <div style="padding:10px;" align="center" >        
            {% if selected.profile.suspended %}
                <a class="usermod-link">reinstate</a>
            {% else %}
                <a class="usermod-link">suspend</a>
            {% endif %}            
         </div>
    {% endif %}
   

  </div>
</td>
<td valign="top" align="left">
  <div style="margin: 2em">
    
    <div class="L W">Name</div>
    <div class="L"><b id="username">{{ selected.profile.display_name }}</b>  
        {% if profile.writeable %} 
            | <a href="/user/edit/{{selected.id}}/">edit</a>
        {% endif %}
    </div>
    <div class="L">Status: {{selected.profile.status}}</div>

    <div class="C"></div>
    
    <div class="L W">Userid</div>
    <div class="L" id="userid">{{selected.id}}</div>
    <div class="C"></div>
    
    {% if user.is_staff %}
      <div class="L W">Email</div>
      <div class="L">{{ selected.email }}</div>
      <div class="C"></div>
    {% endif %}

    <div class="L W">Member for</div>
    <div class="L">{{ selected.date_joined|timesince }}</div>
    <div class="C"></div>

    <div class="L W">Seen</div>
    <div class="L">{{ profile.last_visited|timesince }} ago </div>
    <div class="C"></div>

    <div class="L W">Website</div>
    <div class="L"><a href="{{profile.website}}">{{profile.website}}</a></div>
    <div class="C"></div>

    <div class="L W">Location</div>
    <div class="L">{{ profile.location }}</div>
    <div class="C"></div>
    
  </div>
</td>

<td valign="top" align="center">
<div class="autobiography" style="margin: 1em">
{{ profile.about_me|force_escape|markdown }}
</div>
</td>
</tr>
</table>

    {% if selected == user %}
        <div class="title" id="messages">Messages </div>
        <table class="pad10" border="0" width="100%" id="message-table"> 
            
            {% if page.object_list and page.paginator.num_pages > 1 %}
                <tr><td bgcolor="#EEEEEE" style="border-bottom:1px dotted #999999;">
                    {% pagebar '#messages' %}
                </td></tr>
            
            {% endif %}

            {% for note in page.object_list %}
                <tr><td class="msg-{{note.status}}">
                    &bull; {% time_ago note.date %} {{ note.html|safe }} 
                </tr></tr>
            {% empty %}
                <tr><td>
                    &bull; no messages
                <tr><td>
            {% endfor %}
            <tr><td bgcolor="#EEEEEE" style="border-top:1px dotted #999999;">
                Get a private <a href="/feeds/messages/{{selected.profile.uuid}}/">RSS feed<img src="/static/img/feed-icon-small.png" style="vertical-align: middle; padding-left:3px;"></a> 
                 to your messages.
            </td></tr>

             <tr><td>                
                <div class="small" style="margin-bottom:5px;">
                <div>This section shows activity on posts that you have interacted with.
                    You may also <a href="/note/clear/{{selected.id}}/">clear all<img src="/static/img/trash.jpg" style="vertical-align: middle; padding-left:3px;"></a>  of your messages.
                </div>
            </td></tr>

        </table>
    {% endif %}
 
    <div class="title" id="activity">Activity</div>
    
    <div class="pad10">
        {{ selected.profile.display_name }} has created <a href="/post/list/{{selected.id}}/">{{params.post_count}}  posts</a> distributed as
         <a href="/post/list/{{selected.id}}/questions/">{{params.question_count}} questions</a>, 
         <a href="/post/list/{{selected.id}}/answers/">{{params.answer_count}} answers</a> and 
         <a href="/post/list/{{selected.id}}/comments/">{{params.comment_count}} comments</a>  
         <div>
            This user  has voted {{params.vote_count}} times  and has earned {{params.award_count}} badges
         </div>
    </div>

    <div class="title" id="badges">Badges</div>
    
    <div class="pad10">
        {% for award in awards %}
            <div style="width:175px; height:50px; float:left;">
                <div>
                    <a class="badge">
                        {% badgeicon award.badge.get_type_display %}
                        {{award.badge.name}}
                    </a>
                </div>
                <div>
                    {% time_ago award.date %}
                </div>
            </div>
        {% empty %}
            <div class="note">&bull; no badges earned</div>
        {% endfor %} 
    </div>

{% endblock %}
